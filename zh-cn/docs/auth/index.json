{
  "filename": "index.md",
  "__html": "<h1>接入指引</h1>\n<h5>防沉迷系统需要游戏方服务器对接本渠道服务器。</h5>\n<p><img src=\"http://nosdn-yx.127.net/yxgame/d97c2defabad4f81a6571f745ee7e38f1583742624.jpg\" alt=\"实名认证接入说明\"></p>\n<h5>使用场景：本渠道会在用户登录完成后强制未实名用户进行实名信息注册。游戏方可以不定时调用本渠道接口查询认证信息，并根据业务需求进行防沉迷系统处理。</h5>\n<p>备注：sdk5.3.2版本及以上接入了中宣部的实名认证，实名信息的查询接口发生了变更，返回参数中新增了中宣部的pi值</p>\n<h2>实名认证接入文档</h2>\n<p><font color=red>5.3.2及以上的请求地址</font></p>\n<pre><code class=\"language-json\"> http://game.yixin.im/sdk/user/center/info\n</code></pre>\n<h4>请求方式</h4>\n<p>GET</p>\n<h4>输入参数说明</h4>\n<table>\n<thead>\n<tr>\n<th>参数</th>\n<th>描述</th>\n<th>是否必须</th>\n<th>类型</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>sdkUid</td>\n<td>渠道账号唯一标识</td>\n<td>是</td>\n<td>String</td>\n</tr>\n<tr>\n<td>timestamp</td>\n<td>当前时间戳（毫秒为单位） 5分钟有效</td>\n<td>是</td>\n<td>Long</td>\n</tr>\n<tr>\n<td>nonce</td>\n<td>请求唯一值 使用uuid</td>\n<td>是</td>\n<td>String</td>\n</tr>\n<tr>\n<td>signature</td>\n<td>参数摘要</td>\n<td>是</td>\n<td>String</td>\n</tr>\n<tr>\n<td>gameId</td>\n<td>游戏id号</td>\n<td>是</td>\n<td>String</td>\n</tr>\n</tbody>\n</table>\n<h4>返回数据</h4>\n<table>\n<thead>\n<tr>\n<th>返回值</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>code</td>\n<td>返回状态 200 请求成功</td>\n</tr>\n<tr>\n<td>msg</td>\n<td>返回状态描述</td>\n</tr>\n<tr>\n<td>result.verify_status</td>\n<td>验证结果 1-未验证 2-验证通过</td>\n</tr>\n<tr>\n<td>result .id</td>\n<td>证件号码</td>\n</tr>\n<tr>\n<td>result.age</td>\n<td>年龄</td>\n</tr>\n<tr>\n<td>result.birthday</td>\n<td>出生日期</td>\n</tr>\n<tr>\n<td>result.realName</td>\n<td>姓名</td>\n</tr>\n<tr>\n<td>result.pi</td>\n<td>中宣部pi值</td>\n</tr>\n</tbody>\n</table>\n<h4>返回示例</h4>\n<pre><code class=\"language-json\">{    \n  <span class=\"hljs-attr\">\"code\"</span>: <span class=\"hljs-number\">200</span>,\n  <span class=\"hljs-attr\">\"msg\"</span>: <span class=\"hljs-string\">\"请求成功\"</span>,\n  <span class=\"hljs-attr\">\"result\"</span>: {\n     <span class=\"hljs-attr\">\"verify_status\"</span>:<span class=\"hljs-number\">2</span>,\n     <span class=\"hljs-attr\">\"id\"</span>:<span class=\"hljs-string\">\"30230103021\"</span>,\n     <span class=\"hljs-attr\">\"age\"</span>:<span class=\"hljs-number\">19</span>,\n     <span class=\"hljs-attr\">\"realName\"</span>:<span class=\"hljs-string\">\"张三\"</span>,\n     <span class=\"hljs-attr\">\"birthday\"</span>:<span class=\"hljs-string\">\"20010102\"</span>,\n     <span class=\"hljs-attr\">\"pi\"</span>:<span class=\"hljs-string\">\"1he722ny7qg3rx1y5r7wakpwl6m9uz43z1a8ba\"</span>\n  }\n}\n</code></pre>\n<h4>异常示例</h4>\n<pre><code class=\"language-json\">{    \n  <span class=\"hljs-attr\">\"code\"</span>:<span class=\"hljs-number\">401</span>,\n  <span class=\"hljs-attr\">\"msg\"</span>:<span class=\"hljs-string\">\"参数错误\"</span> \n}\n</code></pre>\n<h4>code码状态</h4>\n<table>\n<thead>\n<tr>\n<th>code码</th>\n<th>描述</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>200</td>\n<td>返回成功</td>\n</tr>\n<tr>\n<td>401</td>\n<td>参数错误，检查各个参数是否正确</td>\n</tr>\n<tr>\n<td>403</td>\n<td>禁止操作</td>\n</tr>\n<tr>\n<td>500</td>\n<td>服务器异常</td>\n</tr>\n</tbody>\n</table>\n<h5>提醒:</h5>\n<ol>\n<li>\n<p>游戏方必须保存用户的标识字段</p>\n</li>\n<li>\n<p>gameId和secretKey必须配套使用</p>\n</li>\n<li>\n<p>timestamp是以毫秒为单位的13位时间戳</p>\n</li>\n<li>\n<p>开发者最好在状态码为401、403状态下，服务宕机情况下，默认设置为通过，并根据实际情况设定相关的预警机制。\n具体问题请咨询云游戏平台。</p>\n</li>\n</ol>\n<h2>附录</h2>\n<p>生成signature签名，示例:</p>\n<p>签名所需参数</p>\n<p>secretKey: 对应开发者后台的gameSecret</p>\n<p>timestamp: 当前时间戳（毫秒为单位）</p>\n<p>nonce: 请求唯一标识</p>\n<p>sdkuid: 渠道账号唯一标识</p>\n<pre><code class=\"language-java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> String <span class=\"hljs-title\">genSign</span><span class=\"hljs-params\">(String sdkuid, String secretKey)</span> </span>{ \n    String nonce = UUIDUtils.createId();\n    <span class=\"hljs-keyword\">long</span> timestamp = System.currentTimeMillis(); \n    StringBuilder params = <span class=\"hljs-keyword\">new</span> StringBuilder(sdkuid);   \n    params.append(timestamp);  \n    params.append(nonce);  \n    params.append(secretKey);   \n    String md5Hex = DigestUtils.md5Hex(params.toString().getBytes(StandardCharsets.UTF_8)); \n    <span class=\"hljs-keyword\">return</span> md5Hex；\n}\n</code></pre>\n",
  "link": "/zh-cn/docs/auth/index.html",
  "meta": {}
}